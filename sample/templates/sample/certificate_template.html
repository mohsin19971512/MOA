{% load static %}

<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta charset="UTF-8">
    <style>


        @font-face {
            font-family: 'Cairo';
            src: url('{{static_url}}fonts/Cairo-VariableFont_slnt,wght.ttf') format('truetype');;
            font-weight: bold;
        }

        body {
            font-family: "Cairo", sans-serif;
            font-size: 11px; /* Decreased font size */
            width: 100%;

        }

        .container {
            max-width: 100%;
            background-color: #ffffff;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            border-radius: 8px;
        }

        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            text-align: center;
            margin-bottom: 10px; /* Reduced margin */
            margin-top: -60px;
        }

        .header img {
            {#width: 170px; /* Reduced logo size */#}
            height: 120px;
        }

        .header-right, .header-left {
            line-height: 1.2;
            margin-top: -80px;
        }

        .header-right h4, .header-left h4 {
            font-size: 12px; /* Reduced header size */
            margin: 3px 0;
        }

        .header-right h5, .header-left h5 {
            font-size: 10px; /* Reduced sub-header size */
            margin: 2px 0;
        }

        table {
            font-family: "Cairo", sans-serif;
            width: 100%;
            border-collapse: collapse;
            margin: 10px -8px; /* Reduced margin */
            text-align: center;
            border-radius: 5px;
            overflow: hidden;
            align-content: center;

        }

        th, td {
            border: 1px solid #1A2130;
            padding: 8px; /* Reduced padding */
            text-align: center;
        }

        th {
            background-color: #f2f2f2;
            font-weight: bold;
        }

        .section-title {
            font-weight: bold;
            font-size: 12px; /* Reduced section title size */
            background-color: #f9e5ff;
            padding: 8px; /* Reduced padding */
            text-align: center;
            margin-top: 15px; /* Reduced margin */
            border-radius: 4px;
            box-shadow: 0 0 5px rgba(0, 0, 0, 0.1);
        }

        .info-table th {
            background-color: #f0f0f0;
            {#color: #333;#}
        }

        .info-table td {
            background-color: #fff;
        }

        .notes {
            font-size: 8pt;
            {#margin-top: 2px; /* Reduced margin */#}
            margin-right: -10px;
            background-color: #FF9874;
            padding: 5px; /* Reduced padding */
            border-radius: 4px;
            width: 99%;
        }

        .signature {
            display: flex;
            justify-content: space-between; /* Aligns the items at the start of the flex container */
            align-items: center; /* Vertically align them in the center */
            margin-top: 20px; /* Add some space at the top */
            margin-left: 10px;
            direction: rtl; /* Ensure content flows from right to left */
        }

        .signature-info {
            margin-right: 20px; /* Add some space between the name/title and the date */
        }

        .signature-info p,
        .signature-date p {
            margin: 0; /* Remove default margins */
        }

        .signature-info p {
            text-align: center; /* Align text to the right for Arabic content */
        }

        .signature-date p {
            text-align: left; /* Align the date to the right */
            padding-left: 10px; /* Optional: add more space between name/title and the date */
        }



        footer {
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 10pt; /* Reduced footer font size */
            margin-top: 70px; /* Reduced margin */
            color: #555;
            background-color: #f1f1f1; /* Optional: background color for footer */
            padding: 10px; /* Optional: padding inside footer */
            margin-left: 10px;
        }

        footer p {
            margin: 0 10px; /* Adjust margin between items as needed */
        }

        .logos-section {
            text-align: center;

        }

        .logo-title {
            font-size: 12px; /* Adjust font size */
            font-weight: bold;
        }

        .logos-container {
            display: flex;
            justify-content: space-around;
            align-items: center;
            gap: 2px;
            border: 1px solid #1A2130;
            width: 100%;
            height: 175px;
            margin-left: 70px;
            margin-bottom: 5px; /* Space between logos and the bottom title */
        }

        .logo-container {
            width: 50%;
            height: 175px;
            border: 1px solid #1A2130;
            overflow: hidden;
            position: relative;
        }

        .logo {
            max-width: 100%;
            height: auto;
            min-height: 120px;
            object-fit: fill;
            display: block;
            margin-top: 5px;
        }


        .logo-label {
            width: 100%;
            height: 10%;
            padding: 3px;
            border: 1px solid #1A2130;
        }

        .logo-left {
            margin-right: 70px;
            width: 80px; /* Adjust the width as needed */
            height: auto; /* Keep the aspect ratio */
        }
        .cu-h3 {
            text-align: center;
            margin-left: 50px;
        }

        .additional-info {
            position: absolute;
            bottom: 0; /* Position it at the bottom of the left section */
            left: 0; /* Align to the left */
            font-size: 12px; /* Adjust font size */
            font-weight: bold; /* Make text bold */
            text-align: left; /* Align text to the left */
        }
        .blue-background th {
            background-color: #3ABEF9;
        }
        .pink-background th{
            background-color: #FF9874;
        }
       .notespink{
            background-color: #FF9874!important;
        }

        .notesblue {
            background-color: #3ABEF9!important;
        }



        .additional-info p {
            margin: 5px 0; /* Add some spacing between the lines */
        }
    </style>
</head>
<body class="{% if sample.sample_type.name == 'مسحوب' %}blue-background{% else %}pink-background{% endif %}">

    <!-- Header -->
    <div class="header">
        <!-- Right section (Arabic) -->
        <div class="header-right">
            <h4>جمهورية العراق</h4>
            <h4>وزارة الزراعة</h4>
            <h4>دائرة فحص وتصديق البذور</h4>
            <h4>قسم المختبرات</h4>
            <h5>عضو الاتحاد الدولي لفحص البذور ISTA</h5>
            <h5>  IQDL0100 رمز العضوية </h5>
        </div>

        <!-- Logos -->
            <div class="logos-section">
                    <!-- Title above logos -->
                {#    <h4 class="logo-title">بسم الله الرحمن الرحيم</h4>#}

                <!-- Logos container with two logos -->
                <div class="logos-container">
                    <div class="logo-container">
                        <div class="logo-label" style="border-right: none; border-left: none;border-top: none">شهادة فحص بذور</div>
                        <img src="{{ static_url }}images/cert-logo.png" alt="Seed Certificate Logo" class="logo">
                        <div class="logo-label" style="border-bottom: none; border-right: none; border-left: none">Seed Tests Certificate</div>
                    </div>
                    <div class="logo-container">
                        <div class="logo-label" style="border-left: none; border-right: none; border-top: none">Accredited CABS</div>
                        <img src="{{ static_url }}images/iqas2.png" alt="IQAS Logo" class="logo">
                        <div class="logo-label" style="border-right: none ;border-bottom: none" >Accredited no.TL 030</div>
                    </div>
                </div>
                <!-- Title below logos -->
                <h4 class="logo-title">ISO 17025:2017</h4>
            </div>

        <!-- Left section (English) -->
        <div class="header-left">
            <h4>Republic of Iraq</h4>
            <h4>Ministry of Agriculture</h4>
            <h4>Directorate Of Seed Testing And Certificate</h4>
            <h4>Laboratory Department</h4>
{#            <h5>ISTA Member</h5>#}
            <h5> Code No.IQDL0100</h5>

        </div>
    </div>
    <h3 class="cu-h3">تم الفحص وفقاً للقواعد الدولية لفحص البذور (ISTA) أصدار عام 2024</h3>

    <!-- Info Table -->
    <table class="info-table">
        <tr >
            <th>عائدية البذور Name Of Applicant </th>
            <td> {{ sample.sender_name }}</td>
            <th>الموقع</th>
            <td>{{ sample.location }}</td>
            <th>نوع العينة</th>
            <td>{{ sample.sample_type.name }}</td>
        </tr>
        <tr>

            <th>رقم العينة</th>
            <td>{{ sample.sample_id }}</td>
            <th>تاريخ سحب العينات</th>
            <td>{{ sample.sample_date|date:"d/m/Y" }}</td>
            <th>تاريخ الاستلام</th>
            <td>{{ sample.received_date|date:"d/m/Y" }}</td>

        </tr>

        <tr>
            <th>تاريخ الفحص</th>
            <td>{{ sample.test_date|date:"d/m/Y" }}</td>
            <th> المحصول والصنف و الرتبة</th>
            <td>{{ sample.crop_name }}</td>
            <th>رقم الإرسالية</th>
            <td>{{ sample.distinguishing_marks }}</td>
        </tr>
        <tr>

            <th>وزن الأرسالية </th>
            <td>{{ sample.shipment_weight }} {{ sample.get_unit_of_measure_display }} </td>
        </tr>
    </table>

    <!-- Results Section -->
{#    <h4 class="section-title">نتائج الفحص</h4>#}
    <table class="results-table">
        <tr>
            <th>نسبة الأنبات % Germination</th>
            <th>التترازوليوم % Tetazulium</th>
            <th>نسبة النقاوة % Purity</th>
            <th>نسبة الرطوبة % Moisture</th>
            <th>عدد بذور الادغال   No of Weed Seed</th>
            <th>عدد بذور المحاصيل الأخرى  No of other crop Seed</th>

        </tr>
        <tr>
            {% if  plant_tests.natural_percentage != None %}
            <td>{{ plant_tests.natural_percentage }}%</td>
            {% else %}


            {% endif %}
            <td>%{{ plant_tests.tetrazonium_test }}</td>
            <td>{{ purity_tests.purity_percentage }}%</td>
            <td>{{ moisture_tests.humidity }}%</td>
            <td>{{ purity_tests.count_Jungle }}</td>
            <td>{{ purity_tests.count_croptype }}</td>

        </tr>

    </table>
<table>
    <thead>
        <tr>
            <!-- First header group (Insect Test) -->
            <th colspan="3">الفحص الحشري Insect Test</th>
            <!-- Second header group (Fungi Test) -->
            <th colspan="2">الفحص الفطري Fungi Test</th>
            <th rowspan="2">عدد ثاليل النيماتودا Nematoda No</th>
        </tr>
        <tr>
            <!-- Sub-headers for Insect Test -->
            <th>نوع الأصابة Infected Type</th>
            <th>المسبب Insect</th>
            <th>%</th>
            <!-- Sub-headers for Fungi Test -->
            <th>المسبب المرضي Pathogen</th>
            <th>%</th>
        </tr>
    </thead>
    <tbody>
    {% for insect, fungal in combined_examinations %}
    <tr>
        <!-- Insect Examination values -->
        {% if insect %}
            <td>{{ insect.infection_type.name }}</td>
            <td>{{ insect.cause.name }}</td>
            <td>{{ insect.infection_percentage|floatformat:1 }}</td>
        {% else %}
            <td></td><td></td><td></td>
        {% endif %}

        <!-- Fungal Examination values -->
        {% if fungal %}
            <td>{{ fungal.cause.name }}</td>
            <td>{{ fungal.infection_percentage|floatformat:1 }}</td>
        {% else %}
            <td>No fungal examination</td>
            <td></td>
        {% endif %}

        <!-- Nematode Test: Single value, display only for the first row -->
        {% if forloop.first %}
            <td>{{ nematode_tests.warts_count }}</td>
        {% else %}
            <td></td> <!-- Leave blank for subsequent rows -->
        {% endif %}
    </tr>
    {% endfor %}
    </tbody>
</table>




    <!-- Notes Section -->
    <div class="notes {% if sample.sample_type.name == 'مسحوب' %}notesblue{% else %}notespink{% endif %}">
        <p>التوصيات: {{ health_tests.note }}</p>
{#        <p><strong>* {{ health_tests.note }}</strong></p>#}
    </div>

    <!-- Signature Section -->
<!-- Signature Section -->
<div class="signature">
    <div class="signature-date">
        <p>15/08/2024</p>
                        <p>No:- 218</p>
        <p>LSBSTC</p>
    </div>

    <div class="signature-info">
        <p>سالم طعمة كاصد</p>
        <p>مدير قسم المختبرات</p>
        <p>Lab Manager</p>

    </div>


</div>


    <div class="additional-info">

</div>



</div>
        <footer>
            <p>بغداد، ساحة ابو جعفر المنصور</p>
            <p>E-mail: sbstc@moagr.org</p>
        </footer>
</body>
</html>
